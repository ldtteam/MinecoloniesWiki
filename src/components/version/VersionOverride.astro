---
import type { Overrideable, OverrideableFieldGetter } from '@utils/override';
import { getOverrideValues } from '@utils/override';

import VersionContent from './VersionContent.astro';

interface Props<V, O extends Overrideable<V>> {
  value: O;
  fieldGetter: OverrideableFieldGetter<O>;
  inline?: boolean;
}

const { value, fieldGetter, inline = true } = Astro.props as Props<unknown, Overrideable<unknown>>;
const values = await getOverrideValues(value, fieldGetter);
---

{
  values.entries().map(async ([value, versions]) => (
    <VersionContent versions={versions} inline={inline}>
      {value}
    </VersionContent>
  ))
}
